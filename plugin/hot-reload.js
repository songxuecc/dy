const filesInDirectory=e=>new Promise((t=>e.createReader().readEntries((e=>Promise.all(e.filter((e=>"."!==e.name[0])).map((e=>e.isDirectory?filesInDirectory(e):new Promise((t=>e.file(t)))))).then((e=>[].concat(...e))).then(t))))),timestampForFilesInDirectory=e=>filesInDirectory(e).then((e=>e.map((e=>e.name+e.lastModifiedDate)).join())),watchChanges=(e,t)=>{timestampForFilesInDirectory(e).then((r=>{t&&t!==r?chrome.runtime.reload():setTimeout((()=>watchChanges(e,r)),1e3)}))};chrome.management.getSelf((e=>{"development"===e.installType&&(chrome.runtime.getPackageDirectoryEntry((e=>watchChanges(e))),chrome.tabs.query({active:!0,lastFocusedWindow:!0},(e=>{e[0]&&chrome.tabs.reload(e[0].id)})))}));